æŒ‡æ¨™ï¼ˆPointerï¼‰æ˜¯ä¸€ç¨®è®Šæ•¸ï¼Œç”¨ä¾†å„²å­˜å¦ä¸€å€‹è®Šæ•¸çš„è¨˜æ†¶é«”ä½å€ã€‚

å®ƒä¸æ˜¯ç›´æ¥å­˜æ”¾æ•¸å€¼ï¼Œè€Œæ˜¯å„²å­˜è©²æ•¸å€¼åœ¨è¨˜æ†¶é«”ä¸­çš„ä½å€ã€‚

å…©å€‹å¸¸ç”¨ï¼š

-   è§£åƒè€ƒé‹ç®—å­ï¼ˆ\*ï¼‰ï¼šç”¨ä¾†å®£å‘ŠæŒ‡æ¨™è®Šæ•¸ï¼Œæˆ–ç”¨ä¾†å­˜å–æŸå€‹ä½å€æ‰€å„²å­˜çš„å€¼ã€‚
-   ä½å€é‹ç®—å­ï¼ˆ&ï¼‰ï¼šç”¨ä¾†å–å¾—è®Šæ•¸çš„ä½å€ï¼Œæˆ–æŠŠæŸè®Šæ•¸çš„ä½å€å‚³çµ¦æŒ‡æ¨™ä½¿ç”¨ã€‚

### 0.1. ç¯„ä¾‹ï¼šå°å‡ºåœ°å€

{% raw %}

```cpp
#include <iostream>
using namespace std;

int main() {
    int m = 100;
    int* ptr = &m;

    cout << "The Value of Variable m is: " << m << endl;
    cout << "The Memory Address of Variable m is: " << &m << endl;
    cout << "The Memory Address of Variable m is using ptr: " << ptr << endl;

    return 0;
}
```

{% endraw %}

### 0.2. ç¯„ä¾‹ï¼šå°å‡ºæŒ‡æ¨™å€¼èˆ‡åœ°å€

{% raw %}

```cpp
#include <iostream>
using namespace std;

int main() {
    int a = 10;
    int* ptr;
    ptr = &a;

    cout << "ptr = " << ptr << endl;
    cout << "*ptr = " << *ptr << endl;

    return 0;
}
```

{% endraw %}

## 1. å®£å‘ŠæŒ‡æ¨™è®Šæ•¸

ç„¡æ³•è®Šæ›´æŒ‡æ¨™æ‰€æŒ‡å‘çš„ data type

### 1.1. å®£å‘Šæ–¹å¼

{% raw %}

```cpp
int *x;
int *x, *y;
int *y=NULL;
float *fptr;
double *dptr;
```

{% endraw %}

### 1.2. ç¯„ä¾‹ï¼šæŸ¥çœ‹ä¸åŒå‹æ…‹èˆ‡æŒ‡æ¨™å¤§å°

C èªè¨€ä¸­çš„æŒ‡æ¨™å¯ä»¥åˆ†ç‚ºè¨±å¤šä¸åŒçš„é¡å‹ï¼Œå…·é«”å–æ±ºæ–¼å®ƒæ‰€æŒ‡å‘çš„æ•¸æ“š

{% raw %}

```cpp
#include <iostream>
using namespace std;

int main() {
    int a1 = 40, a2 = 50, a3 = 60;
    int* p1 = &a1;
    int* p2 = &a2;
    int* p3 = &a3;

    cout << p1 << "\t" << *p1 << endl;
    cout << p2 << "\t" << *p2 << endl;
    cout << p3 << "\t" << *p3 << endl;

    // æŸ¥çœ‹ä¸åŒå‹æ…‹çš„æŒ‡æ¨™å¤§å°
    int* iptr;
    float* fptr;
    double* dptr;

    cout << "sizeof(iptr) = " << sizeof(iptr) << endl;
    cout << "sizeof(fptr) = " << sizeof(fptr) << endl;
    cout << "sizeof(dptr) = " << sizeof(dptr) << endl;
    return 0;
}
```

{% endraw %}

## 2. Integer Pointers(æ•´æ•¸æŒ‡æ¨™)

### 2.1. ç¯„ä¾‹ï¼šcall by valueï¼ˆå‚³å€¼ï¼Œç„¡æ³•äº¤æ›ï¼‰

{% raw %}

```cpp
#include <iostream>
using namespace std;

void swap(int a, int b) {
    int temp = a;
    a = b;
    b = temp;
}

int main() {
    int i = 1;
    int j = 2;
    swap(i, j);
    cout << "i = " << i << ", j = " << j << endl;
    return 0;
}
```

{% endraw %}

### 2.2. ç¯„ä¾‹ï¼šCall by Pointerï¼ˆé€éæŒ‡æ¨™äº¤æ›ï¼‰

{% raw %}

```cpp
#include <iostream>
using namespace std;

void swap(int* a, int* b) {
    int temp = *a;
    *a = *b;
    *b = temp;
}

int main() {
    int i = 1;
    int j = 2;
    swap(&i, &j);
    cout << "i = " << i << ", j = " << j << endl;
    return 0;
}
```

{% endraw %}

## 3. å…ƒç´ æŒ‡æ¨™ï¼ˆElement Pointerï¼‰

å…ƒç´ æŒ‡æ¨™æ˜¯æŒ‡å‘é™£åˆ—ç¬¬ 0 å€‹å…ƒç´ çš„åœ°å€çš„æŒ‡æ¨™ã€‚

ç•¶ä½ å¯« `int *ptr = arr;`ï¼Œä»£è¡¨ ptr æŒ‡å‘ `arr[0]`ï¼Œä¹Ÿå°±æ˜¯é™£åˆ—çš„ç¬¬ 0 å€‹å…ƒç´ ã€‚

{% raw %}

```cpp
#include <iostream>
using namespace std;

int main() {
    int arr[5] = {1, 2, 3, 4, 5};
    int* ptr = arr;  // ptr æŒ‡å‘ arr[0]

    cout << "Address of arr[0]: " << ptr << endl;

    return 0;
}
```

{% endraw %}

### 3.1. ç¯„ä¾‹ï¼šï¼ˆé‡è¦ï¼‰å­˜å–é™£åˆ—å…ƒç´ çš„ä½å€

ä½¿ç”¨ `ptr + i`ï¼ˆæŒ‡æ¨™é‹ç®—ï¼‰ï¼š

-   `ptr + i` è¨ˆç®—ç¬¬ i å€‹å…ƒç´ çš„ä½å€ã€‚
    ä½¿ç”¨ `&ptr[i]`ï¼ˆèªæ³•ç³–ï¼‰:
-   `&ptr[i]` ç›´æ¥å–å¾—ç¬¬ i å€‹å…ƒç´ çš„ä½å€ã€‚
-   é€™æ˜¯` ptr + i` çš„èªæ³•ç³–ï¼Œç·¨è­¯å™¨æœƒå°‡å…¶è½‰æ›ç‚º `ptr + i`ã€‚

{% raw %}

```cpp
#include <iostream>
using namespace std;

int main() {
    int arr[5] = {1, 2, 3, 4, 5};
    int* ptr = arr; // æŒ‡å‘ arr[0]

    // æŒ‡æ¨™é‹ç®—
    cout << "Pointer arithmetic (ptr + i):\n";
    for (int i = 0; i < 5; ++i) {
        cout << (ptr + i) << '\n';
    }

    // èªæ³•ç³–ï¼š&ptr[i]
    cout << "\nAddress using &ptr[i]:\n";
    for (int i = 0; i < 5; ++i) {
        cout << &ptr[i] << '\n';
    }

    return 0;
}

```

{% endraw %}

### 3.2. ç¯„ä¾‹ï¼šï¼ˆé‡è¦ï¼‰å­˜å–é™£åˆ—å…ƒç´ çš„å€¼

ä½¿ç”¨ `*(ptr + i)`ï¼ˆæŒ‡é‡ç®—è¡“ï¼‰
ä½¿ç”¨ `ptr[i]`ï¼ˆèªæ³•ç³–ï¼‰

{% raw %}

```cpp
#include <iostream>
using namespace std;

int main() {
    int arr[5] = {1, 2, 3, 4, 5};
    int* ptr = arr;

    // æŒ‡æ¨™ç®—è¡“
    cout << "Values via *(ptr + i): ";
    for (int i = 0; i < 5; ++i) {
        cout << *(ptr + i) << "\t";
    }
    cout << "\n";

    // èªæ³•ç³– ptr[i]
    cout << "Values via ptr[i]:     ";
    for (int i = 0; i < 5; ++i) {
        cout << ptr[i] << "\t";
    }
    cout << "\n";

    return 0;
}
```

{% endraw %}

### 3.3. ç¯„ä¾‹ï¼šä½¿ç”¨é™£åˆ—èˆ‡æŒ‡æ¨™ä½œç‚ºå‡½å¼åƒæ•¸ 01ï¼ˆåˆ—å‡ºå€¼èˆ‡ä½å€ï¼‰

{% raw %}

```cpp
#include <iostream>
using namespace std;

void f1(int arr[]) {
    for (int i = 0; i < 5; ++i) {
        cout << arr[i] << " ";
    }
    cout << "\n";
    for (int i = 0; i < 5; ++i) {
        cout << &arr[i] << " ";
    }
    cout << "\n";
}

void f2(int* arr) {
    for (int i = 0; i < 5; ++i) {
        cout << arr[i] << " ";
    }
    cout << "\n";
    for (int i = 0; i < 5; ++i) {
        cout << &arr[i] << " ";
    }
    cout << "\n";
}

int main() {
    int arr[5] = {1, 2, 3, 4, 5};
    f1(arr);
    f2(arr);
    return 0;
}
```

{% endraw %}

### 3.4. ç¯„ä¾‹ï¼šä½¿ç”¨é™£åˆ—èˆ‡æŒ‡æ¨™ä½œç‚ºå‡½å¼åƒæ•¸ 02ï¼ˆåˆ—å‡ºå€¼èˆ‡ä½å€ï¼‰

{% raw %}

```cpp
#include <iostream>
using namespace std;

// ä½¿ç”¨é™£åˆ—èªæ³•
void printArray01(int a[], int size) {
    for (int i = 0; i < size; ++i) {
        cout << "a[" << i << "] = " << a[i] << " (Address: " << &a[i] << ")\n";
    }
    cout << "\n";
}

// ä½¿ç”¨æŒ‡æ¨™èªæ³•
void printArray02(int* a, int size) {
    for (int i = 0; i < size; ++i) {
        cout << "a[" << i << "] = " << a[i] << " (Address: " << &a[i] << ")\n";
    }
    cout << "\n";
}

int main() {
    int arr[] = {1, 2, 3, 4, 5};
    int* ptr = arr;

    // ä¿®æ”¹é™£åˆ—å€¼
    for (int i = 0; i < 5; ++i) {
        ptr[i] += 3;
    }

    // å‚³é
    printArray01(arr, 5);
    printArray02(arr, 5);

    return 0;
}

```

{% endraw %}

## 4. é™£åˆ—æŒ‡æ¨™ï¼ˆArray Pointerï¼‰

é™£åˆ—æŒ‡æ¨™æ˜¯æŒ‡å‘æ•´å€‹é™£åˆ—çš„æŒ‡æ¨™ï¼Œä¸æ˜¯æŒ‡å‘å–®ä¸€å…ƒç´ ã€‚

æœ€å¸¸ç”¨æ–¼ å¤šç¶­é™£åˆ—å·¥ä½œ èˆ‡ ä¿ç•™é™£åˆ—å¤§å°è³‡è¨Šã€‚

| å®£å‘Šæ–¹å¼              | èªªæ˜                       |
| --------------------- | -------------------------- |
| `int *p = arr;`       | æŒ‡å‘ `arr[0]`ï¼Œç¬¬ 0 å€‹å…ƒç´  |
| `int (*p)[5] = &arr;` | æŒ‡å‘æ•´å€‹ `arr[5]` é™£åˆ—     |

### 4.1. ç¯„ä¾‹ï¼šå€åˆ†æŒ‡å‘å…ƒç´ èˆ‡æ•´å€‹é™£åˆ—

{% raw %}

```cpp
#include <iostream>
using namespace std;

int main() {
    int arr[5] = {10, 20, 30, 40, 50};
    int* p1 = arr;         // æŒ‡å‘ arr[0]
    int (*p2)[5] = &arr;   // æŒ‡å‘æ•´å€‹é™£åˆ— arr[5]

    // å­˜å–å…ƒç´ 
    cout << p1[2] << endl;        // å°å‡º 30
    cout << (*p2)[2] << endl;     // ä¸€æ¨£å°å‡º 30

    // æŒ‡å‘è³‡æ–™çš„å¤§å°
    cout << "sizeof(*p1) = " << sizeof(*p1) << endl;  // 4ï¼ˆintï¼‰
    cout << "sizeof(*p2) = " << sizeof(*p2) << endl;  // 20ï¼ˆ5 intsï¼‰

    // æŒ‡æ¨™æœ¬èº«çš„å¤§å°ï¼ˆé€šå¸¸æ˜¯ 8 bytes on 64-bit systemsï¼‰
    cout << "sizeof(p1) = " << sizeof(p1) << endl;
    cout << "sizeof(p2) = " << sizeof(p2) << endl;

    return 0;
}

```

{% endraw %}

### 4.2. ç¯„ä¾‹ï¼šæŒ‡å‘å–®ä¸€å…ƒç´  vs æ•´å€‹é™£åˆ—çš„æŒ‡æ¨™è¡Œç‚º

{% raw %}

```cpp
#include <iostream>
using namespace std;

int main() {
    int arr[5] = {1, 2, 3, 4, 5};
    int* p1;         // æŒ‡å‘å–®ä¸€æ•´æ•¸ï¼ˆarr[0]ï¼‰
    int (*p2)[5];    // æŒ‡å‘æ•´å€‹é™£åˆ—ï¼ˆarrï¼‰

    p1 = arr;
    p2 = &arr;

    // å°å‡ºåœ°å€
    cout << "p1  = " << p1 << endl;
    cout << "*p2 = " << *p2 << "\n\n";

    // å‘å¾Œç§»å‹•
    p1++;  // å‰é€² 1 å€‹ intï¼ˆ4 bytesï¼‰
    p2++;  // å‰é€² 1 å€‹é™£åˆ—ï¼ˆ5 * sizeof(int) = 20 bytesï¼‰

    cout << "p1  = " << p1 << endl;
    cout << "p2  = " << p2 << endl;

    // å°å‡ºå€¼
    cout << "p1[0] = " << *p1 << endl;       // arr[1]
    cout << "p1[1] = " << *(p1 + 1) << endl; // arr[2]

    // æ³¨æ„ï¼š*(p2)[0] æŒ‡çš„æ˜¯ã€Œp2 æŒ‡å‘çš„é™£åˆ—ã€çš„ç¬¬ 0 å€‹å…ƒç´ 
    cout << "p2[0][0] = " << (*p2)[0] << endl; // å¯èƒ½æ˜¯ arr[5] ç¯„åœä¹‹å¤–çš„å€¼ï¼ˆä¸ä¿è­‰ï¼‰

    return 0;
}

```

{% endraw %}

### 4.3. ç¯„ä¾‹ï¼šå°‡ Array Pointer å‚³å…¥å‡½å¼

{% raw %}

```cpp
#include <iostream>
using namespace std;

// æ¥æ”¶ä¸€å€‹æŒ‡å‘å«æœ‰ 5 å€‹ int çš„é™£åˆ—æŒ‡æ¨™
void printArray(int (*p)[5]) {
    for (int i = 0; i < 5; ++i) {
        cout << (*p)[i] << " ";
    }
    cout << endl;
}

int main() {
    int arr[5] = {1, 2, 3, 4, 5};
    printArray(&arr);  // å‚³æ•´å€‹é™£åˆ—çš„ä½å€
    return 0;
}
```

{% endraw %}

## 5. æŒ‡æ¨™æ“ä½œäºŒç¶­é™£åˆ—

```cpp
int arr[2][3] = {
    {1, 2, 3},
    {4, 5, 6}
};

// å…¶å¯¦åœ¨è¨˜æ†¶é«”ä¸­æ˜¯ä¸€æ¢ç›´ç·š
// [1][2][3][4][5][6]
```

### 5.1. ç¯„ä¾‹ï¼šæ“ä½œæ–¹å¼ 01ï¼šç”¨ int\* ç·šæ€§å­˜å–æ•´å€‹äºŒç¶­é™£åˆ—

{% raw %}

```cpp
#include <iostream>
using namespace std;

int main() {
    int arr[2][3] = {
        {1, 2, 3},
        {4, 5, 6}
    };

    int* p = &arr[0][0];  // æŒ‡å‘ç¬¬ä¸€å€‹å…ƒç´ 

    for (int i = 0; i < 6; ++i) {
        cout << *(p + i) << " ";
        // æˆ–ä½¿ç”¨èªæ³•ç³–ï¼š
        cout << p[i] << " ";
    }
    cout << endl;

    return 0;
}

```

{% endraw %}

### 5.2. ç¯„ä¾‹ï¼š### ç¯„ä¾‹ï¼šæ“ä½œæ–¹å¼ 02ï¼šä½¿ç”¨äºŒç¶­æŒ‡æ¨™é‹ç®—å­˜å–å…ƒç´ 

{% raw %}

```cpp
#include <iostream>
using namespace std;

int main() {
    int num[2][4] = {
        {312, 16, 35, 65},
        {52, 111, 77, 80}
    };

    // äºŒç¶­é™£åˆ—æœ¬é«”å³ç‚ºæŒ‡æ¨™ï¼ˆæŒ‡å‘ç¬¬ä¸€åˆ—ï¼‰
    cout << "num         = " << num << endl;
    cout << "num + 1     = " << (num + 1) << endl;

    // è§£åƒè€ƒæ–¹å¼å–å¾—åˆ—åœ°å€
    cout << "*(num)      = " << *(num) << endl;
    cout << "*(num + 1)  = " << *(num + 1) << endl;

    // å­˜å–ç‰¹å®šä½ç½®åœ°å€èˆ‡å€¼
    cout << "*(num) + 2         = " << *(num) + 2 << endl;
    cout << "*(num + 1) + 2     = " << *(num + 1) + 2 << endl;
    cout << "*(*(num) + 2)      = " << *(*(num) + 2) << endl;       // num[0][2]
    cout << "*(*(num + 1) + 2)  = " << *(*(num + 1) + 2) << endl;   // num[1][2]

    // ä½¿ç”¨è¿´åœˆé€ä¸€å°å‡ºæ‰€æœ‰å…ƒç´ 
    size_t m = sizeof(num) / sizeof(num[0]);       // åˆ—æ•¸
    size_t n = sizeof(num[0]) / sizeof(num[0][0]); // è¡Œæ•¸

    for (size_t i = 0; i < m; ++i) {
        for (size_t j = 0; j < n; ++j) {
            cout << *(*(num + i) + j) << "\t"; // æˆ–å¯«ä½œ num[i][j]
        }
        cout << endl;
    }

    return 0;
}

```

{% endraw %}

### 5.3. ç¯„ä¾‹ï¼šæ“ä½œæ–¹å¼ 03ï¼šä½¿ç”¨ã€ŒæŒ‡å‘ä¸€æ•´åˆ—ã€çš„æŒ‡æ¨™æ“ä½œäºŒç¶­é™£åˆ—

{% raw %}

```cpp
#include <iostream>
using namespace std;

int main() {
    int arr[2][3] = {
        {1, 2, 3},
        {4, 5, 6}
    };

    int (*p)[3] = arr; // p æ˜¯æŒ‡å‘ 3 å€‹ int é™£åˆ—çš„æŒ‡æ¨™

    for (int i = 0; i < 2; ++i) {
        for (int j = 0; j < 3; ++j) {
            cout << p[i][j] << " ";
        }
    }
    cout << endl;

    return 0;
}

```

{% endraw %}

## 6. å‡½æ•¸æŒ‡æ¨™ï¼ˆFunction Pointerï¼‰

å‡½æ•¸æŒ‡æ¨™å¯ä»¥å„²å­˜ã€Œå‡½æ•¸çš„ä½å€ã€ã€‚

ç”¨æ–¼å¯¦ç¾ callbackï¼ˆå›å‘¼ï¼‰æ©Ÿåˆ¶ã€è¡Œç‚ºæŠ½è±¡åŒ–ï¼Œç”šè‡³æ¨¡æ“¬ç°¡å–® ç­–ç•¥æ¨¡å¼ã€‚

{% raw %}

```cpp
// å»ºç«‹å‡½æ•¸
int add(int a, int b) {
    return a + b;
}

// å®£å‘Šå‡½æ•¸æŒ‡æ¨™ï¼šæŒ‡å‘è¿”å› int ä¸”æ¥å—å…©å€‹ int çš„å‡½æ•¸
int (*fptr)(int, int);

// åˆå§‹åŒ–å‡½æ•¸æŒ‡æ¨™
fptr = &add;   // å¯å¯«ä½œ fptr = add;

// å‘¼å«æ–¹å¼
int result1 = (*fptr)(3, 4); // è§£åƒè€ƒæ–¹å¼
int result2 = fptr(3, 4);    // ç›´æ¥å‘¼å«æ–¹å¼

```

{% endraw %}

### 6.1. ç¯„ä¾‹ï¼šåŸºæœ¬å‡½æ•¸æŒ‡æ¨™ç¯„ä¾‹

{% raw %}

```cpp
#include <iostream>
using namespace std;

int add(int a, int b) {
    return a + b;
}

int main() {
    int (*fptr)(int, int);  // å®£å‘ŠæŒ‡å‘å‡½æ•¸çš„æŒ‡æ¨™
    fptr = add;             // åˆå§‹åŒ–ï¼ˆå¯çœç•¥ &ï¼‰

    cout << "Result: " << fptr(5, 3) << endl;  // è¼¸å‡º: 8
    return 0;
}
```

{% endraw %}

### 6.2. ç¯„ä¾‹ï¼šå‡½æ•¸å›å‚³æŒ‡æ¨™ï¼ˆå¦‚å›å‚³ int\*ï¼‰

{% raw %}

```cpp
#include <iostream>
using namespace std;

int* firstPositive(int* ptr) {
    while (*ptr == 0) {
        ++ptr;
    }
    return ptr;
}

int main() {
    int array[] = {0, 1, 0, 5, 9, 0, 0, 6, 0, 2};

    int* iptr = firstPositive(array);
    cout << "*iptr = " << *iptr << endl;

    iptr = firstPositive(iptr + 1);
    cout << "*iptr = " << *iptr << endl;

    return 0;
}

// Output:
// *iptr = 1
// *iptr = 5

```

{% endraw %}

### 6.3. ç¯„ä¾‹ï¼šæª¢æŸ¥ NULL å‡½æ•¸æŒ‡æ¨™

{% raw %}

```cpp
#include <iostream>
using namespace std;

int add(int a, int b) { return a + b; }

int main() {
    int (*fptr)(int, int) = nullptr;

    if (fptr == nullptr) {
        cout << "Pointer is NULL" << endl;
    }

    fptr = add;

    if (fptr != nullptr) {
        cout << "Result: " << fptr(5, 3) << endl;  // Output: 8
    }

    return 0;
}

```

{% endraw %}

### 6.4. ç¯„ä¾‹ï¼šå‡½æ•¸æŒ‡æ¨™é™£åˆ—ï¼ˆFunction Pointer Arrayï¼‰

{% raw %}

```cpp
#include <iostream>
using namespace std;

int add(int a, int b) { return a + b; }
int sub(int a, int b) { return a - b; }
int mul(int a, int b) { return a * b; }

int main() {
    // å®£å‘Šä¸€å€‹å‡½æ•¸æŒ‡æ¨™é™£åˆ—
    int (*farr[])(int, int) = {add, sub, mul};

    cout << "Add: " << farr[0](10, 5) << endl; // 15
    cout << "Sub: " << farr[1](10, 5) << endl; // 5
    cout << "Mul: " << farr[2](10, 5) << endl; // 50

    return 0;
}

```

{% endraw %}

### 6.5. ç¯„ä¾‹ï¼šCallback æ©Ÿåˆ¶æ‡‰ç”¨ï¼ˆå‚³å…¥å‡½æ•¸ç•¶ä½œåƒæ•¸ï¼‰

{% raw %}

```cpp
#include <iostream>
using namespace std;

int add(int a, int b) { return a + b; }
int subtract(int a, int b) { return a - b; }

// æ¥æ”¶ä¸€å€‹å‡½æ•¸æŒ‡æ¨™ä½œç‚ºåƒæ•¸
void calc(int a, int b, int (*op)(int, int)) {
    cout << "Result: " << op(a, b) << endl;
}

int main() {
    calc(10, 5, add);      // Output: Result: 15
    calc(10, 5, subtract); // Output: Result: 5
    return 0;
}
```

{% endraw %}

## 7. çµæ§‹æŒ‡æ¨™(Structure Pointer)

{% raw %}

```cpp
#include <iostream>
using namespace std;

struct A {
    int var;
};

int main() {
    A a = {30};   // C++ ä¸­å¯çœç•¥ struct é—œéµå­—
    A* ptr = &a;  // æŒ‡æ¨™æŒ‡å‘ a

    cout << (*ptr).var << " ";  // Dot Operatorï¼ˆè§£åƒè€ƒå†å­˜å–ï¼‰
    cout << ptr->var << endl;   // Arrow Operatorï¼ˆæ¨è–¦ç”¨æ³•ï¼‰
    return 0;
}
```

{% endraw %}

## 8. é›™æŒ‡æ¨™(Double Pointer)

é›™æŒ‡æ¨™æ˜¯æŒ‡å‘ã€ŒæŒ‡æ¨™è®Šæ•¸ã€çš„æŒ‡æ¨™

åœ¨ C++ ä¸­å¸¸ç”¨æ–¼ï¼š

-   ä¿®æ”¹æŒ‡æ¨™æœ¬èº«çš„å€¼ï¼ˆä¾‹å¦‚å‡½å¼ä¸­å‹•æ…‹é…ç½®è¨˜æ†¶é«”ï¼‰
-   è¡¨ç¤ºå‹•æ…‹é…ç½®çš„ äºŒç¶­é™£åˆ—
-   å­—ä¸²é™£åˆ—ï¼ˆä¾‹å¦‚ char\*\* argvï¼‰

![upgit_20250319_1742372900.png|1065x533](https://raw.githubusercontent.com/kcwc1029/obsidian-upgit-image/main/2025/03/upgit_20250319_1742372900.png)

{% raw %}

```c
// å®£å‘Šé›™æŒ‡é‡
int **dptr; // å®£å‘Šä¸€å€‹æŒ‡å‘ int* çš„é›™æŒ‡é‡

// åˆå§‹åŒ–é›™æŒ‡é‡
pointer_name = &single_pointer;
```

{% endraw %}

### 8.1. ç¯„ä¾‹ï¼šåŸºæœ¬é›™æŒ‡æ¨™æ“ä½œ

{% raw %}

```cpp
#include <iostream>
using namespace std;

int main() {
    int var = 10;
    int* ptr = &var;
    int** dptr = &ptr;

    cout << "è®Šæ•¸ var çš„å€¼: " << var << endl;

    cout << "*ptr æŒ‡å‘çš„å€¼: " << *ptr << endl;
    cout << "**dptr æŒ‡å‘çš„å€¼: " << **dptr << endl;

    cout << "ptr çš„åœ°å€ï¼ˆdptr æŒ‡å‘çš„ä½ç½®ï¼‰: " << dptr << endl;
    cout << "ptr çš„å€¼ï¼ˆä¹Ÿå°±æ˜¯ var çš„ä½å€ï¼‰: " << ptr << endl;

    return 0;
}

```

{% endraw %}

### 8.2. ç¯„ä¾‹ï¼šå‚³éå­—ä¸²é™£åˆ—çµ¦å‡½æ•¸ï¼ˆä½¿ç”¨ char\*[]ï¼‰

{% raw %}

```cpp
#include <iostream>
using namespace std;

void printStrings(char** arr, int n) {
    for (int i = 0; i < n; ++i) {
        cout << arr[i] << endl;
    }
}

int main() {
    // æŒ‡æ¨™é™£åˆ—ï¼ˆArray of Pointersï¼‰
    char* arr[] = {"Geek", "Geeks", "Geekfor"};
    printStrings(arr, 3);
    return 0;
}

```

{% endraw %}

### 8.3. ç¯„ä¾‹ï¼šä½¿ç”¨é›™æŒ‡æ¨™å‹•æ…‹åˆ†é…äºŒç¶­é™£åˆ—ï¼ˆæ‰‹å‹•é…ç½®ï¼‰

{% raw %}

```cpp
#include <iostream>
using namespace std;

int main() {
    int m = 2, n = 3;

    // åˆ†é… m è¡Œ
    int** arr = new int*[m];

    // æ¯è¡Œåˆ†é… n å€‹æ•´æ•¸
    for (int i = 0; i < m; ++i) {
        arr[i] = new int[n];
    }

    // åˆå§‹åŒ–é™£åˆ—
    for (int i = 0; i < m; ++i) {
        for (int j = 0; j < n; ++j) {
            arr[i][j] = i * n + j + 1;
        }
    }

    // è¼¸å‡ºé™£åˆ—
    for (int i = 0; i < m; ++i) {
        for (int j = 0; j < n; ++j) {
            cout << arr[i][j] << " ";
        }
        cout << endl;
    }

    // é‡‹æ”¾è¨˜æ†¶é«”
    for (int i = 0; i < m; ++i) {
        delete[] arr[i];
    }
    delete[] arr;

    return 0;
}
```

{% endraw %}

## 9. ç©ºæŒ‡æ¨™(Null Pointer)

åœ¨ C++ ä¸­ï¼Œç©ºæŒ‡æ¨™ï¼ˆNull Pointerï¼‰ è¡¨ç¤ºã€Œä¸æŒ‡å‘ä»»ä½•æœ‰æ•ˆè¨˜æ†¶é«”ä½ç½®ã€çš„æŒ‡æ¨™ã€‚

-   C++11 ä¹‹å‰ä½¿ç”¨ NULLï¼ˆæœ¬è³ªä¸Šæ˜¯ 0ï¼‰
-   C++11 ä¹‹å¾Œå»ºè­°ä½¿ç”¨ nullptrï¼ˆå°ˆé–€ç‚ºæŒ‡æ¨™è¨­è¨ˆçš„å¸¸æ•¸ï¼Œå‹åˆ¥å®‰å…¨ï¼‰

å¸¸è¦‹ç”¨é€”

-   åˆå§‹åŒ–æŒ‡æ¨™ï¼Œé¿å…æœªå®šç¾©è¡Œç‚º
-   åˆ¤æ–·è¨˜æ†¶é«”åˆ†é…æ˜¯å¦æˆåŠŸ
-   ä½œç‚ºè³‡æ–™çµæ§‹çš„çµå°¾æ¨™è¨˜ï¼ˆå¦‚ linked listï¼‰

{% raw %}

```cpp
int* ptr = nullptr; // å»ºè­°ç”¨æ³•ï¼ˆC++11+ï¼‰

// èˆŠå¯«æ³•ï¼ˆä»å¯ç”¨ï¼Œä½†ä¸æ¨è–¦ï¼‰
int* ptr2 = NULL;
int* ptr3 = 0;  // å¯éš±å¼è½‰ç‚º nullptr
```

{% endraw %}

### 9.1. ç¯„ä¾‹ï¼šåˆå§‹åŒ–ç©ºæŒ‡æ¨™ä¸¦æª¢æŸ¥

{% raw %}

```cpp
#include <iostream>
using namespace std;

int main() {
    int* ptr = nullptr;

    if (ptr == nullptr) {
        cout << "Pointer is NULL (nullptr)" << endl;
    } else {
        cout << "Pointer is NOT NULL" << endl;
    }

    return 0;
}
```

{% endraw %}

### 9.2. ç¯„ä¾‹ï¼šæª¢æŸ¥å‹•æ…‹è¨˜æ†¶é«”é…ç½®æ˜¯å¦æˆåŠŸ

{% raw %}

```cpp
#include <iostream>
using namespace std;

int main() {
    int* ptr = new(nothrow) int[5];  // é…ç½® 5 å€‹ int ç©ºé–“ï¼Œä½¿ç”¨ nothrow ä»¥é˜²éŒ¯

    if (ptr == nullptr) {
        cout << "Memory Allocation Failed" << endl;
    } else {
        cout << "Memory Allocation Succeeded" << endl;
        delete[] ptr;  // é‡‹æ”¾è¨˜æ†¶é«”
    }

    return 0;
}

```

{% endraw %}

### 9.3. ç¯„ä¾‹ï¼šåœ¨è³‡æ–™çµæ§‹ä¸­è¡¨ç¤ºçµå°¾ï¼ˆç©ºéˆçµä¸²åˆ—ï¼‰

{% raw %}

```cpp
#include <iostream>
using namespace std;

struct Node {
    int data;
    Node* next;
};

int main() {
    Node* head = nullptr;

    if (head == nullptr) {
        cout << "Linked list is empty" << endl;
    }

    return 0;
}

```

{% endraw %}

## 10. NULL Pointer vs Void Pointer

| ç‰¹æ€§     | Null Pointerï¼ˆ`nullptr`ï¼‰       | Void Pointerï¼ˆ`void*`ï¼‰                  |
| -------- | ------------------------------- | ---------------------------------------- |
| å®šç¾©     | ä¸æŒ‡å‘ä»»ä½•æœ‰æ•ˆä½å€çš„ç‰¹æ®Šå€¼      | ä¸€ç¨®ã€Œé€šç”¨æŒ‡æ¨™å‹åˆ¥ã€ï¼Œå¯æŒ‡å‘ä»»æ„å‹åˆ¥è³‡æ–™ |
| é¡å‹     | æ‰€æœ‰æŒ‡æ¨™å‹åˆ¥çš†å¯è¨­ç‚º `nullptr`  | åƒ…èƒ½å®£å‘Šç‚º `void*`                       |
| æ¯”è¼ƒæ€§è³ª | æ‰€æœ‰ç©ºæŒ‡æ¨™çš†ç­‰æ–¼ `nullptr`      | ä¸åŒ `void*` å€¼ä¸ä¸€å®šç›¸ç­‰                |
| ç¯„ä¾‹     | `int* p = nullptr;`             | `void* p = &someVar;`                    |
| è½‰æ›é™åˆ¶ | ä¸å¯ç›´æ¥å° `nullptr` åšç®—è¡“é‹ç®— | `void*` éœ€è½‰å‹æ‰èƒ½å­˜å–å¯¦å€¼               |

## 11. ç¸½çµï¼špointer å„ªé»

-   å¯æœ‰æ•ˆå­˜å–èˆ‡æ“ä½œè¨˜æ†¶é«”
-   é©ç”¨æ–¼ å‹•æ…‹è¨˜æ†¶é«”ç®¡ç†
-   å¯ç”¨æ–¼æ§‹å»ºéˆæ´»çš„è³‡æ–™çµæ§‹ï¼ˆå¦‚ Linked Listã€Treeã€Graphï¼‰
-   æé«˜å‡½å¼å‚³éå½ˆæ€§ï¼ˆå¦‚å‚³å…¥å¤§å‹é™£åˆ—çš„ä½å€ï¼‰
-   å¯æ¸›å°‘è¤‡è£½ï¼Œæé«˜æ•ˆèƒ½èˆ‡å½ˆæ€§

## 12. ç¸½çµï¼špointer ç¼ºé»

| é¢¨éšªé¡å‹      | èªªæ˜                                                      |
| ------------- | --------------------------------------------------------- |
| è¨˜æ†¶é«”æ´©æ¼    | é…ç½®è¨˜æ†¶é«”å¾Œæœªé‡‹æ”¾ï¼Œå°è‡´ç³»çµ±ç„¡æ³•å›æ”¶è³‡æº                  |
| æœªåˆå§‹åŒ–æŒ‡æ¨™  | æŒ‡æ¨™æœªè¨­ç‚º `nullptr`ï¼Œå°±æ“ä½œæœƒé€ æˆ **Segmentation Fault** |
| æŒ‡æ¨™ç®—è¡“éŒ¯èª¤  | è¶Šç•Œã€éŒ¯èª¤çš„åœ°å€è¨ˆç®—å¯èƒ½å°è‡´æœªå®šç¾©è¡Œç‚º                    |
| å¤šé‡ `delete` | é‡è¤‡é‡‹æ”¾è¨˜æ†¶é«”æœƒå°è‡´ä¸ç©©å®šè¡Œç‚ºèˆ‡ç¨‹å¼å´©æ½°                  |


## 13. æ™ºæ…§æŒ‡æ¨™ï¼ˆSmart Pointersï¼‰
åœ¨å‚³çµ± C++ ä¸­ï¼Œæˆ‘å€‘å¸¸å¸¸é€™æ¨£å¯«ï¼š

{% raw %}
```cpp
int* p = new int(10);
// åšä¸€äº›æ“ä½œ...
delete p;  // è¦è¨˜å¾—æ‰‹å‹•é‡‹æ”¾
```
{% endraw %}

ä½†é€™æ¨£å¾ˆå®¹æ˜“å¿˜è¨˜ deleteï¼Œå°è‡´ è¨˜æ†¶é«”æ´©æ¼ï¼ˆmemory leakï¼‰ï¼

æ™ºæ…§æŒ‡æ¨™æœƒ è‡ªå‹•å¹«ä½  deleteï¼Œä¸ç”¨æ‰‹å‹•é‡‹æ”¾è¨˜æ†¶é«”ã€‚

### 13.1. shared_ptrï¼ˆå…±äº«æŒ‡æ¨™ï¼‰

å¤šå€‹ shared_ptr å¯ä»¥æŒ‡å‘åŒä¸€å€‹ç‰©ä»¶ã€‚

ç•¶æœ€å¾Œä¸€å€‹ shared_ptr è¢«éŠ·æ¯€æ™‚ï¼Œè©²ç‰©ä»¶æœƒè‡ªå‹•è¢«é‡‹æ”¾ã€‚



{% raw %}
```cpp
#include <iostream>
#include <memory> // è¦åŒ…å«é€™å€‹

using namespace std;

class Dog {
public:
    Dog(string name) : name(name) {
        cout << "Dog " << name << " è¢«å»ºç«‹" << endl;
    }
    ~Dog() {
        cout << "Dog " << name << " è¢«éŠ·æ¯€" << endl;
    }
    void bark() {
        cout << name << "ï¼šæ±ªï¼" << endl;
    }
private:
    string name;
};

int main() {
    shared_ptr<Dog> p1 = make_shared<Dog>("å°é»‘");  // å»ºç«‹æ™ºæ…§æŒ‡æ¨™
    {
        shared_ptr<Dog> p2 = p1;  // p2 ä¹ŸæŒ‡å‘åŒä¸€éš»ç‹—
        p2->bark();               // å‘¼å« bark
        cout << "use_count: " << p1.use_count() << endl;  // ğŸ‘‰ é¡¯ç¤ºæœ‰å¹¾å€‹ shared_ptr æŒ‡å‘è©²ç‰©ä»¶
    } // p2 è¢«éŠ·æ¯€ï¼Œä½† p1 é‚„æ´»è‘—
    cout << "use_count: " << p1.use_count() << endl;
} // p1 è¢«éŠ·æ¯€ï¼Œæ­¤æ™‚ Dog ä¹Ÿè¢«éŠ·æ¯€
```
{% endraw %}

### 13.2. unique_ptrï¼ˆå”¯ä¸€æŒ‡æ¨™ï¼‰
ä¸€å€‹ unique_ptr åªèƒ½ç”±ä¸€å€‹æ“æœ‰è€…æ“æœ‰ã€‚

ä¸å¯ä»¥è¤‡è£½ï¼Œåªèƒ½è½‰ç§»ï¼ˆä½¿ç”¨ std::moveï¼‰ã€‚


{% raw %}
```cpp
#include <iostream>
#include <memory>

using namespace std;

class Cat {
public:
    Cat(string name) : name(name) {
        cout << "Cat " << name << " è¢«å»ºç«‹" << endl;
    }
    ~Cat() {
        cout << "Cat " << name << " è¢«éŠ·æ¯€" << endl;
    }
    void meow() {
        cout << name << "ï¼šå–µï¼" << endl;
    }
private:
    string name;
};

int main() {
    unique_ptr<Cat> c1 = make_unique<Cat>("å°ç™½");
    c1->meow();

    // unique_ptr ä¸èƒ½è¤‡è£½ï¼Œé€™æœƒéŒ¯èª¤ï¼š
    // unique_ptr<Cat> c2 = c1;

    // è¦ç”¨ move() æŠŠæ“æœ‰æ¬Šè½‰ç§»
    unique_ptr<Cat> c2 = move(c1);

    if (!c1)
        cout << "c1 æ˜¯ç©ºçš„" << endl;

    c2->meow();
} // é›¢é–‹ scope æ™‚ï¼ŒCat è‡ªå‹•è¢«åˆªé™¤
```
{% endraw %}