## æŠ½è±¡è³‡æ–™å‹åˆ¥ (ADT)

ADT æ˜¯æŒ‡ä¸€ç¨®ç”±è³‡æ–™èˆ‡æ“ä½œæ§‹æˆçš„è³‡æ–™å‹åˆ¥ï¼Œå®ƒéš±è—å¯¦ä½œç´°ç¯€ï¼Œåªæä¾›ä»‹é¢è®“ä½¿ç”¨è€…æ“ä½œã€‚

é¡åˆ¥ class å°±æ˜¯ä¸€ç¨®å¯¦ä½œ ADT çš„æ–¹å¼ï¼Œçµåˆäº†ã€Œè³‡æ–™æˆå“¡ã€èˆ‡ã€Œæˆå“¡å‡½å¼ã€ã€‚

## class åŸºæœ¬èªæ³•

### å»ºç«‹ class

{% raw %}

```cpp
class Student {
private: // è¡¨ç¤ºé€™å€‹è³‡æ–™åªæœ‰é¡åˆ¥è£¡çš„å‡½æ•¸å¯ä»¥ç”¨
    int StuID;  // å­¸è™Ÿ(è®Šæ•¸)
public: //  è¡¨ç¤ºé€™å€‹å‡½æ•¸å¯ä»¥åœ¨é¡åˆ¥å¤–å‘¼å«
    void input_data();  // è¼¸å…¥è³‡æ–™(å‡½æ•¸)
    void show_data();   // é¡¯ç¤ºè³‡æ–™(å‡½æ•¸)
};
```

{% endraw %}

### åˆ©ç”¨ class å»ºç«‹ object

{% raw %}

```cpp
Student stud1;  // å»ºç«‹ä¸€å€‹ Student ç‰©ä»¶å« stud1
```

{% endraw %}

### ä½¿ç”¨ object

{% raw %}

````cpp
## æŠ½è±¡è³‡æ–™å‹åˆ¥ (ADT)

ADT æ˜¯æŒ‡ä¸€ç¨®ç”±è³‡æ–™èˆ‡æ“ä½œæ§‹æˆçš„è³‡æ–™å‹åˆ¥ï¼Œå®ƒéš±è—å¯¦ä½œç´°ç¯€ï¼Œåªæä¾›ä»‹é¢è®“ä½¿ç”¨è€…æ“ä½œã€‚

é¡åˆ¥ class å°±æ˜¯ä¸€ç¨®å¯¦ä½œ ADT çš„æ–¹å¼ï¼Œçµåˆäº†ã€Œè³‡æ–™æˆå“¡ã€èˆ‡ã€Œæˆå“¡å‡½å¼ã€ã€‚

## class åŸºæœ¬èªæ³•

### å»ºç«‹ class

{% raw %}

```cpp
class Student {
private: // è¡¨ç¤ºé€™å€‹è³‡æ–™åªæœ‰é¡åˆ¥è£¡çš„å‡½æ•¸å¯ä»¥ç”¨
    int StuID;  // å­¸è™Ÿ(è®Šæ•¸)
public: //  è¡¨ç¤ºé€™å€‹å‡½æ•¸å¯ä»¥åœ¨é¡åˆ¥å¤–å‘¼å«
    void input_data();  // è¼¸å…¥è³‡æ–™(å‡½æ•¸)
    void show_data();   // é¡¯ç¤ºè³‡æ–™(å‡½æ•¸)
};
````

{% endraw %}

### åˆ©ç”¨ class å»ºç«‹ object

{% raw %}

```cpp
Student stud1;  // å»ºç«‹ä¸€å€‹ Student ç‰©ä»¶å« stud1
```

{% endraw %}

### ä½¿ç”¨ object(ä½¿ç”¨ä½œç”¨åŸŸè§£æé‹ç®—å­)

{% raw %}

```cpp
#include <iostream>
using namespace std;


class Student {
private: // è¡¨ç¤ºé€™å€‹è³‡æ–™åªæœ‰é¡åˆ¥è£¡çš„å‡½æ•¸å¯ä»¥ç”¨
    int StuID;  // å­¸è™Ÿ(è®Šæ•¸)
public: //  è¡¨ç¤ºé€™å€‹å‡½æ•¸å¯ä»¥åœ¨é¡åˆ¥å¤–å‘¼å«
    void input_data();  // è¼¸å…¥è³‡æ–™(å‡½æ•¸)
    void show_data(){ // é¡¯ç¤ºè³‡æ–™(å‡½æ•¸)
        cout << "å­¸è™Ÿæ˜¯ï¼š" << StuID << endl;
    }
};


// å®šç¾©æˆå“¡å‡½æ•¸çš„å…§å®¹ => ::å«åšã€Œä½œç”¨åŸŸè§£æé‹ç®—å­ã€
void Student::input_data() {
    cout << "è«‹è¼¸å…¥å­¸è™Ÿï¼š";
    cin >> StuID;
}


// ä½¿ç”¨
int main() {
    Student stud1;         // å®£å‘Šä¸€å€‹ç‰©ä»¶
    stud1.input_data();    // å‘¼å«è¼¸å…¥è³‡æ–™çš„å‡½æ•¸
    stud1.show_data();     // å‘¼å«é¡¯ç¤ºè³‡æ–™çš„å‡½æ•¸
    return 0;
}
```

{% endraw %}

## å»ºæ§‹å­ï¼ˆConstructorï¼‰

å»ºæ§‹å­æ˜¯ã€Œåœ¨ä½ å»ºç«‹ç‰©ä»¶æ™‚è‡ªå‹•åŸ·è¡Œçš„ç‰¹æ®Šå‡½æ•¸ã€ï¼Œç”¨é€”æ˜¯ç”¨ä¾†åˆå§‹åŒ–ç‰©ä»¶è£¡çš„æˆå“¡è®Šæ•¸ã€‚

ç‰¹é»ï¼š

-   åå­—èˆ‡ class åç¨±ä¸€æ¨£
-   ä¸éœ€è¦å›å‚³å‹æ…‹
-   å¯ä»¥æœ‰å¤šå€‹å»ºæ§‹å­ => æ”¯æ´ã€Œå¤šè¼‰ã€ï¼ˆoverloadingï¼‰
-   æ²’æœ‰å¯«å»ºæ§‹å­ï¼Œç³»çµ±æœƒè‡ªå‹•å¹«ä½ ç”Ÿä¸€å€‹ã€Œé è¨­å»ºæ§‹å­ã€

### ç¯„ä¾‹ï¼šå»ºç«‹æ²’æœ‰åƒæ•¸çš„ Constructor

{% raw %}

```cpp
#include <iostream>
using namespace std;

class Student {
private:
    int StuID;
    float English, Math, Total, Average;
public:
    Student();  // é è¨­å»ºæ§‹å­ï¼ˆæ²’åƒæ•¸ï¼‰
    Student(int id, float E, float M); // è‡ªè¨‚å»ºæ§‹å­ï¼ˆæœ‰ä¸‰å€‹åƒæ•¸ï¼‰
    void show_data(); // é¡¯ç¤ºè³‡æ–™
};

// ä½œç”¨åŸŸè§£æé‹ç®—å­ä¸­å»çµ¦memberå€¼
Student::Student() {
    StuID = 920101;
    English = 60;
    Math = 80;
}

void Student::show_data() {
    cout << Math << "\n";
}

int main() {
    Student stud1; // å»ºç«‹objectçš„æ™‚å€™ï¼Œæœƒè‡ªå‹•å»è·‘objectçš„construct
    stud1.show_data();
    return 0;
}
```

{% endraw %}

### ç¯„ä¾‹ï¼šå»ºç«‹æœ‰åƒæ•¸çš„ Constructor

{% raw %}

```cpp
#include <iostream>
using namespace std;

class Student {
private:
    int StuID;
    float English, Math, Total, Average;
public:
    Student();  // é è¨­å»ºæ§‹å­ï¼ˆæ²’åƒæ•¸ï¼‰
    Student(int id, float E, float M); // è‡ªè¨‚å»ºæ§‹å­ï¼ˆæœ‰ä¸‰å€‹åƒæ•¸ï¼‰
    void show_data(); // é¡¯ç¤ºè³‡æ–™
};


Student::Student(int id, float E, float M) {
    StuID = id;
    English = E;
    Math = M;
}

void Student::show_data() {
    Total = English + Math;
    Average = Total / 2;
    cout << "å­¸è™Ÿæ˜¯: " << StuID << endl;
    cout << "ç¸½åˆ†æ˜¯: " << Total << "ï¼Œå¹³å‡æ˜¯: " << Average << endl;
}

int main() {
    Student stud2(920102, 30, 40); // å‘¼å«ä¸‰åƒæ•¸å»ºæ§‹å­
    stud2.show_data();          // é¡¯ç¤º stud2 çš„è³‡æ–™
}
```

{% endraw %}

## è§£æ§‹å­ï¼ˆDestructorï¼‰

è§£æ§‹å­æ˜¯ä¸€ç¨®ç‰¹æ®Šå‡½æ•¸ï¼Œç•¶ä¸€å€‹ç‰©ä»¶ã€Œç”Ÿå‘½é€±æœŸçµæŸã€æ™‚ï¼Œæœƒè‡ªå‹•åŸ·è¡Œä¾†é‡‹æ”¾è³‡æºæˆ–åšæ”¶å°¾å·¥ä½œã€‚

åŠŸèƒ½ï¼š

-   è‡ªå‹•åŸ·è¡Œã€Œæ¸…ç†å·¥ä½œã€ => ç¨‹å¼çµæŸã€ç‰©ä»¶é›¢é–‹ä½œç”¨åŸŸã€delete ç‰©ä»¶æ™‚å°±æœƒè¢«å‘¼å«ã€‚
-   å¹«ä½ é‡‹æ”¾è¨˜æ†¶é«”æˆ–çµæŸå‰çš„å‹•ä½œï¼ˆåƒæ˜¯é—œæª”æ¡ˆã€é‡‹æ”¾é™£åˆ—ç­‰ï¼‰ã€‚

èªæ³•ï¼š

{% raw %}

```cpp
~é¡åˆ¥åç¨±(); // æ³¨æ„å‰é¢æœ‰ä¸€å€‹ ~ ç¬¦è™Ÿï¼Œä¸èƒ½æœ‰ä»»ä½•åƒæ•¸ï¼Œä¹Ÿä¸å¯«å›å‚³å‹æ…‹
```

{% endraw %}

### ç¯„ä¾‹ï¼šä½¿ç”¨ Destructor

{% raw %}

```cpp
#include <iostream>
using namespace std;

class testN {
private:
    int no[10];     // é™£åˆ—
    int i;
public:
    testN();        // å»ºæ§‹å­
    ~testN();       // è§£æ§‹å­
};


// å®šç¾©constructor
testN::testN() {
    int i;
    for(i = 0; i < 10; i++) {
        no[i] = i;
    }
    cout << "å»ºæ§‹å­åŸ·è¡Œå®Œæˆã€‚" << endl;
}


// å®šç¾©Destructor
testN::~testN() {
    cout << "è§£æ§‹å­ç™¼å‹•ä¸­ã€‚\né™£åˆ—å…§çš„å…§å®¹ï¼š";
    for(i = 0; i < 10; i++) {
        cout << no[i] << " ";
    }
    cout << "\nç‰©ä»¶å·²åŸ·è¡Œå®Œç•¢ã€‚" << endl;
}

// ä½¿ç”¨è§£æ§‹å­çš„å‡½å¼
void show_result() {
    testN test1;  // å®£å‘Šç‰©ä»¶ï¼ˆå»ºæ§‹å­æœƒåœ¨é€™è£¡åŸ·è¡Œï¼‰
    return;       // å‡½æ•¸çµæŸæ™‚ test1 çš„è§£æ§‹å­æœƒè‡ªå‹•åŸ·è¡Œ
}

int main() {
    show_result();  // å‘¼å«å‡½å¼ï¼Œè£¡é¢æœƒå»ºç«‹ test1
    return 0;
}

```

{% endraw %}

## æŒ‡æ¨™ç‰©ä»¶

ä¸Šè¿°çš„ç‰©ä»¶å»ºç«‹æ–¹å¼å±¬æ–¼ã€Œéœæ…‹å»ºç«‹ç‰©ä»¶ã€=> ç•¶ç¨‹å¼è·‘åˆ°é€™è¡Œæ™‚ï¼Œstud1 å°±æœƒè‡ªå‹•å»ºç«‹ï¼Œä¹Ÿæœƒè‡ªå‹•é‡‹æ”¾è¨˜æ†¶é«”ã€‚

å¦‚æœå¸Œæœ›ã€Œå‹•æ…‹å»ºç«‹ç‰©ä»¶ã€å°±è¦ç”¨ã€ŒæŒ‡æ¨™ç‰©ä»¶ã€çš„æ–¹å¼

{% raw %}

```cpp
Student* stud1 = new Student;
```

{% endraw %}

é€™æ™‚æœƒï¼š

-   åœ¨è¨˜æ†¶é«”å †å€ï¼ˆheapï¼‰åˆ†é…ç©ºé–“ã€‚
-   å›å‚³è©²ç‰©ä»¶çš„æŒ‡æ¨™ï¼ˆStudent\*ï¼‰ã€‚
-   ä½ å¿…é ˆæ‰‹å‹•ç”¨ delete å»åˆªé™¤ç‰©ä»¶ã€‚

### ç¯„ä¾‹ï¼šä½¿ç”¨æŒ‡æ¨™ç‰©ä»¶å‹•æ…‹å»ºç«‹

{% raw %}

```cpp
#include <iostream>
using namespace std;

class Student {
private:
    char StuID[8];         // å­¸è™Ÿï¼ˆç”¨å­—å…ƒé™£åˆ—è¡¨ç¤ºï¼‰
    float Score_E, Score_M, Score_T, Score_A;  // åˆ†æ•¸è³‡æ–™
public:
    // å»ºæ§‹å­ï¼šç‰©ä»¶å»ºç«‹æ™‚è‡ªå‹•åŸ·è¡Œ
    Student() {
        cout << "*** åŸ·è¡Œå»ºæ§‹å­ $$$ ***" << endl;
    }
    // è§£æ§‹å­ï¼šç‰©ä»¶åˆªé™¤æ™‚è‡ªå‹•åŸ·è¡Œ
    ~Student() {
        cout << "### åŸ·è¡Œè§£æ§‹å­ ###" << endl;
    }
    // å‡½æ•¸
    void input_data() {
        cout << "è«‹è¼¸å…¥å­¸è™ŸåŠç§‘ç³»æ¨™ç±¤ï¼š" << endl;
        cout << "å­¸è™Ÿï¼š";
        cin >> StuID;
        cout << "è«‹è¼¸å…¥è‹±æ–‡æˆç¸¾ï¼š";
        cin >> Score_E;
        cout << "è«‹è¼¸å…¥æ•¸å­¸æˆç¸¾ï¼š";
        cin >> Score_M;
    }
    void show_data(); // é€™é‚Šæˆ‘ç”¨ä½œç”¨åŸŸè§£æé‹ç®—å­å»åš
};

void Student::show_data(){
    Score_T = Score_E + Score_M;
    Score_A = Score_T / 2;
    cout << "==============================" << endl;
    cout << "å­¸è™Ÿæ˜¯ï¼š" << StuID << endl;
    cout << "ç¸½åˆ†æ˜¯ " << Score_T << " åˆ†ï¼Œå¹³å‡æ˜¯ " << Score_A << " åˆ†" << endl;
    cout << "==============================" << endl;
}

int main() {
    Student* stud1 = new Student; // ä½¿ç”¨ new å»ºç«‹æŒ‡æ¨™ç‰©ä»¶ï¼ˆåœ¨ heap å‹•æ…‹è¨˜æ†¶é«”ä¸­å»ºç«‹ï¼‰

    // ä½¿ç”¨æŒ‡æ¨™å‘¼å«æˆå“¡å‡½æ•¸ï¼ˆç”¨ ->ï¼‰
    stud1->input_data();
    stud1->show_data();

    delete stud1; // ä½¿ç”¨ delete é‡‹æ”¾æŒ‡æ¨™ç‰©ä»¶ï¼ˆå‘¼å«è§£æ§‹å­ï¼‰
    return 0;
}
```

{% endraw %}

## ç‰©ä»¶é™£åˆ—

é™£åˆ—å¯ä»¥æ”¾ intã€æ”¾ charã€æ”¾ stringï¼Œä¹Ÿå¯ä»¥æ”¾ object

{% raw %}

```cpp
#include <iostream>
using namespace std;

class Baseball {
private:
    char player[20];
    int fires;
    int safes;

public:
    void inputplayer();   // è¼¸å…¥è³‡æ–™
    void showplayer();    // é¡¯ç¤ºè³‡æ–™
    float countsafe();    // è¨ˆç®—æ‰“æ“Šç‡ = safes / fires
};

void Baseball::inputplayer() {
    cout << "è«‹è¼¸å…¥çƒå“¡åå­—ï¼š";
    cin >> player;
    cout << "è«‹è¼¸å…¥æ‰“æ•¸ï¼š";
    cin >> fires;
    cout << "è«‹è¼¸å…¥å®‰æ‰“æ•¸ï¼š";
    cin >> safes;
}

void Baseball::showplayer() {
    cout << "çƒå“¡ï¼š" << player << endl;
    cout << "æ‰“æ•¸ï¼š" << fires << "ï¼Œå®‰æ‰“æ•¸ï¼š" << safes << endl;
    cout << "æ‰“æ“Šç‡ï¼š" << countsafe() << endl;
}

float Baseball::countsafe() {
    if (fires == 0) return 0.0;
    return (float) safes/fires;
}

int main(){
    Baseball b[3];        // å®£å‘Šé™£åˆ—ï¼ˆ3 ä½çƒå“¡ï¼‰
    for(int i=0; i<3; i++){
        b[i].inputplayer();  // è¼¸å…¥æ¯å€‹çƒå“¡è³‡æ–™
    }
    for(int i=0; i<3; i++){
        b[i].showplayer();   // é¡¯ç¤ºçƒå“¡è³‡è¨Šèˆ‡æ‰“æ“Šç‡
    }
    return 0;
}
```

{% endraw %}

## æœ‹å‹å‡½æ•¸(friend)

C++ é¡åˆ¥é€šå¸¸æœƒæŠŠæˆå“¡è¨­ç‚º privateï¼Œä¸èƒ½è®“åˆ¥äººç›´æ¥å­˜å–ã€‚ä½†ä½ å¯ä»¥æŒ‡å®šæŸäº›ã€Œæœ‹å‹ï¼ˆfriendï¼‰ã€å‡½æ•¸æˆ–é¡åˆ¥ä¾†ç‰¹åˆ¥å…è¨±ä»–å€‘å­˜å– private æˆå“¡ï¼

### ç¯„ä¾‹ï¼šæœªä½¿ç”¨ friend è€Œå¤±æ•—

-   å‡è¨­è¦å®£å‘Šä¸€å€‹ classã€Studentã€‘ï¼Œè£¡é¢å„²å­˜æœŸæœ«ç¸½åˆ†(Score_T)
-   ç„¶å¾Œè¦å¯«ä¸€å€‹å¤–éƒ¨è®Šæ•¸(add_bonus)ï¼Œä½œç”¨æ˜¯å¹«å¿™åŠ åˆ†

{% raw %}

```cpp
#include <iostream>
using namespace std;

class Student {
private:
    int Score_T;  // æœŸæœ«ç¸½åˆ†

public:
    Student(int s) {
        Score_T = s;
    }
};

// å¤–éƒ¨å‡½æ•¸ï¼Œæƒ³è¦å¹«å¿™åŠ åˆ†
int add_bonus(Student s) {
    return s.Score_T + 10;  // âŒ éŒ¯èª¤ï¼šScore_T æ˜¯ privateï¼Œå¤–é¢çœ‹ä¸åˆ°
}

int main() {
    Student s1(70);
    cout << "åŠ åˆ†å¾Œçš„æˆç¸¾æ˜¯ï¼š" << add_bonus(s1) << endl;
    return 0;
}

// .\test.cpp:16:14: éŒ¯èª¤ï¼šã€Œint Student::Score_Tã€ is private within this context

// Score_T æ˜¯ privateï¼Œå¤–éƒ¨å‡½æ•¸ add_bonus() ä¸æ˜¯ Student çš„æˆå“¡ => æ‰€ä»¥ä¸èƒ½ç›´æ¥ã€Œå·çœ‹ã€æˆç¸¾ => å°è£
```

{% endraw %}

### ç¯„ä¾‹ï¼šä½¿ç”¨ friend function ä¿®æ­£

{% raw %}

```cpp
#include <iostream>
using namespace std;

class Student {
private:
    int Score_T;  // æœŸæœ«ç¸½åˆ†

public:
    Student(int s) {
        Score_T = s;
    }
    friend int add_bonus(Student);  // âœ… å®£å‘Šé€™å€‹å¤–éƒ¨å‡½æ•¸æ˜¯æœ‹å‹ï¼
};

// å¤–éƒ¨å‡½æ•¸ï¼Œæƒ³è¦å¹«å¿™åŠ åˆ†
int add_bonus(Student s) {
    return s.Score_T + 10;  // âŒ éŒ¯èª¤ï¼šScore_T æ˜¯ privateï¼Œå¤–é¢çœ‹ä¸åˆ°
}

int main() {
    Student s1(70);
    cout << "åŠ åˆ†å¾Œçš„æˆç¸¾æ˜¯ï¼š" << add_bonus(s1) << endl;
    return 0;
}
```

{% endraw %}

## æœ‹å‹é¡åˆ¥(friend class)

friend é¡åˆ¥æ˜¯ä¸€ç¨®æ¬Šé™æˆäºˆæ©Ÿåˆ¶ï¼Œè®“å¦ä¸€å€‹é¡åˆ¥å¯ä»¥å­˜å–æœ¬é¡åˆ¥çš„ private å’Œ protected æˆå“¡ã€‚

### ç¯„ä¾‹ï¼šæœªä½¿ç”¨ friend class è€Œå¤±æ•—

-   å‡è¨­è¦å®£å‘Šä¸€å€‹ classã€Studentã€‘ï¼Œè£¡é¢å„²å­˜æœŸæœ«ç¸½åˆ†(Score_T)
-   å¦ä¸€æ ¼ classã€Teacherã€‘è² è²¬æ‰¹æ”¹èˆ‡é¡¯ç¤ºæˆç¸¾ï¼Œä½†å®ƒä¸æ˜¯ Student çš„æˆå“¡é¡åˆ¥

{% raw %}

```cpp
#include <iostream>
using namespace std;

class Student {
private:
    int Score_T;
public:
    Student(int s) {
        Score_T = s;
    }
};

class Teacher {
public:
    void show_score(Student s) {
        cout << "å­¸ç”Ÿåˆ†æ•¸æ˜¯ï¼š" << s.Score_T << endl;  // âŒ éŒ¯èª¤ï¼Score_T æ˜¯ private
    }
};

int main() {
    Student s1(80);
    Teacher t;
    t.show_score(s1);
    return 0;
}

// .\test.cpp: åœ¨ ã€Œvoid Teacher::show_score(Student)ã€ æˆå“¡å‡½å¼ä¸­:
// .\test.cpp:16:37: éŒ¯èª¤ï¼šã€Œint Student::Score_Tã€ is private within this contex
```

{% endraw %}

### ç¯„ä¾‹ï¼šä½¿ç”¨ friend class ä¿®æ­£

{% raw %}

```cpp
#include <iostream>
using namespace std;

class Student {
private:
    int Score_T;
public:
    Student(int s) {
        Score_T = s;
    }
    friend class Teacher;  // âœ… å®£å‘Šæ•´å€‹ Teacher é¡åˆ¥æ˜¯æœ‹å‹
};

class Teacher {
public:
    void show_score(Student s) {
        cout << "å­¸ç”Ÿåˆ†æ•¸æ˜¯ï¼š" << s.Score_T << endl;  // âŒ éŒ¯èª¤ï¼Score_T æ˜¯ private
    }
};

int main() {
    Student s1(80);
    Teacher t;
    t.show_score(s1);
    return 0;
}
```

{% endraw %}

## this æŒ‡æ¨™

æ¯å€‹ç‰©ä»¶å»ºç«‹æ™‚ï¼ŒC++ æœƒè‡ªå‹•ç”¢ç”Ÿä¸€å€‹éš±è—çš„æŒ‡æ¨™ï¼šthis

this æ˜¯ä¸€å€‹æŒ‡å‘ã€Œç›®å‰é€™å€‹ç‰©ä»¶ã€çš„æŒ‡æ¨™ï¼Œç”¨ä¾†ï¼š

-   è¨ªå•é€™å€‹ç‰©ä»¶çš„è³‡æ–™æˆå“¡
-   å›å‚³ç›®å‰ç‰©ä»¶æœ¬èº«ï¼ˆå›å‚³ \*thisï¼‰

### ç¯„ä¾‹ï¼šthis æŒ‡æ¨™

{% raw %}

```cpp
#include <iostream>
using namespace std;

class Square{
private:
public:
    int a;
    // å»ºæ§‹å­
    Square(int n){
        a = n * n;
    }
    // æˆå“¡å‡½æ•¸
    Square squ_sum(Square b){
        this->a = this->a + b.a;
        return *this;
    }

    int show_data() {
        cout << this->a << endl;
        return 0;
    }
};

int main() {
    int n1 = 6, n2 = 8;
    Square first(n1), second(n2), third(0);      // ç‰©ä»¶åˆå§‹åŒ–
    third = first.squ_sum(second);               // first åŠ  secondï¼Œå›å‚³æ–°ç‰©ä»¶
    third.show_data();                           // å°å‡ºçµæœ
    return 0;
}
```

{% endraw %}

## éœæ…‹è³‡æ–™æˆå“¡ï¼ˆstatic data memberï¼‰

æ˜¯è¢« static å®£å‘Šçš„ã€Œé¡åˆ¥æˆå“¡è®Šæ•¸ã€

å®ƒä¸å±¬æ–¼æŸå€‹ç‰©ä»¶ï¼Œè€Œæ˜¯æ•´å€‹é¡åˆ¥å…±ç”¨ã€‚æ‰€æœ‰ç‰©ä»¶å…±äº«é€™å€‹è®Šæ•¸çš„ã€ŒåŒä¸€ä»½è¨˜æ†¶é«”ã€

```c
// å®£å‘Šéœæ…‹æˆå“¡ï¼šåªèƒ½å®£å‘Šï¼Œä¸èƒ½åˆå§‹åŒ–
class MyClass {
    static int counter;  // å®£å‘Šç‚ºéœæ…‹è³‡æ–™æˆå“¡
};

int MyClass::counter = 0;  // é¡åˆ¥å¤–éƒ¨åˆå§‹åŒ–éœæ…‹æˆå“¡ï¼ˆé€™æ˜¯å¿…è¦çš„ï¼ï¼‰
```

### ç¯„ä¾‹ï¼šä½¿ç”¨ static æˆå“¡è¨ˆç®—å»ºç«‹å¹¾å€‹ç‰©ä»¶

{% raw %}

```cpp
#include <iostream>
#include <string.h>
using namespace std;

class Dog {
private:
    char* pName;
    char* pColor;
    static int counter;  // éœæ…‹è®Šæ•¸å®£å‘Šï¼šçµ±è¨ˆç”¢ç”Ÿå¹¾å€‹ Dog ç‰©ä»¶

public:
    // å»ºæ§‹å­
    Dog(const char* pN, const char* pC) {
        pName = new char[strlen(pN)+1];
        strcpy(pName, pN);
        pColor = new char[strlen(pC)+1];
        strcpy(pColor, pC);
        counter++;  // æ¯å»ºç«‹ä¸€éš»ç‹—ï¼Œå°± +1
    }

    int getCounter() {
        return counter;
    }
};

// é¡åˆ¥å¤–éƒ¨åˆå§‹åŒ–
int Dog::counter = 0;

int main() {
    Dog d1("å°ç™½", "ç™½è‰²");
    Dog d2("å°é»ƒ", "é»ƒè‰²");
    Dog d3("å°ç´…", "ç´…è‰²");
    cout << d1.getCounter() << endl;  // å°å‡º 3
    return 0;
}
```

{% endraw %}

## static æˆå“¡å‡½å¼

è¢« static é—œéµå­—ä¿®é£¾çš„æˆå“¡å‡½å¼ã€‚

å®ƒæ˜¯ã€Œæ•´å€‹é¡åˆ¥ã€å…±ç”¨ï¼Œè€Œä¸æ˜¯ã€ŒæŸå€‹ç‰©ä»¶ã€çš„è¡Œç‚º => æ‰€ä»¥å®ƒ ä¸èƒ½å­˜å–ééœæ…‹æˆå“¡ï¼ˆé static çš„è®Šæ•¸æˆ–å‡½å¼ï¼‰

```c
// å®£å‘Šéœæ…‹æˆå“¡ï¼šåªèƒ½å®£å‘Šï¼Œä¸èƒ½åˆå§‹åŒ–
class MyClass {
    static int counter;  // å®£å‘Šç‚ºéœæ…‹è³‡æ–™æˆå“¡
};

int MyClass::counter = 0;  // é¡åˆ¥å¤–éƒ¨åˆå§‹åŒ–éœæ…‹æˆå“¡ï¼ˆé€™æ˜¯å¿…è¦çš„ï¼ï¼‰
```

### ç¯„ä¾‹ï¼šä½¿ç”¨ static å‡½æ•¸è¨ˆç®—å»ºç«‹å¹¾å€‹ç‰©ä»¶

{% raw %}

```cpp
#include <iostream>
#include <string.h>
using namespace std;

class Dog {
private:
    char* pName;
    char* pColor;
    static int counter;  // éœæ…‹è®Šæ•¸å®£å‘Šï¼šçµ±è¨ˆç”¢ç”Ÿå¹¾å€‹ Dog ç‰©ä»¶

public:
    // å»ºæ§‹å­
    Dog(const char* pN, const char* pC) {
        pName = new char[strlen(pN)+1];
        strcpy(pName, pN);
        pColor = new char[strlen(pC)+1];
        strcpy(pColor, pC);
        counter++;  // æ¯å»ºç«‹ä¸€éš»ç‹—ï¼Œå°± +1
    }

    static int getCounter() {
        return counter;
    }
};

// é¡åˆ¥å¤–éƒ¨åˆå§‹åŒ–
int Dog::counter = 0;

int main() {
    Dog d1("å°ç™½", "ç™½è‰²");
    Dog d2("å°é»ƒ", "é»ƒè‰²");
    Dog d3("å°ç´…", "ç´…è‰²");
    cout << Dog::getCounter() << endl;  // å°å‡º 3
    return 0;
}
```

{% endraw %}

## ç‰©ä»¶å‚³åƒæ•¸æ–¹å¼

### ç‰©ä»¶å‚³å€¼å‘¼å«

å°‡ã€Œç‰©ä»¶çš„å‰¯æœ¬ã€å‚³é€²å‡½æ•¸ä¸­

å‡½æ•¸å…§æ“ä½œçš„æ˜¯è¤‡è£½å“ï¼Œä¸æœƒå½±éŸ¿åŸå§‹ç‰©ä»¶

ç‰¹é»ï¼š

-   å®‰å…¨ï¼Œä¸æœƒæ”¹è®ŠåŸç‰©ä»¶
-   æ•ˆç‡ä½ï¼ˆå¤§å‹ç‰©ä»¶è¤‡è£½æˆæœ¬é«˜ï¼‰

### ç¯„ä¾‹ï¼šç‰©ä»¶å‚³å€¼å‘¼å«ï¼šæ¯”è¼ƒå…©å€‹ Box çš„é«”ç©

{% raw %}

```cpp
#include <iostream>
using namespace std;

class Box {
private:
    double length, width, height;
public:
    // å»ºæ§‹å­
    Box(double l = 1, double w = 1, double h = 1) {
        length = l;
        width = w;
        height = h;
    }

    // è¨ˆç®—é«”ç©
    double volume() {
        return length * width * height;
    }

    // é¡¯ç¤ºå°ºå¯¸
    void show() {
        cout << "å°ºå¯¸ï¼š" << length << " x " << width << " x " << height << endl;
    }
};

// å‚³å€¼å‘¼å«å‡½æ•¸
void compare(Box b1, Box b2) {
    b1.show();
    b2.show();

    if (b1.volume() > b2.volume())
        cout << "ğŸ“¦ ç¬¬ 1 å€‹ç›’å­æ¯”è¼ƒå¤§ï¼" << endl;
    else if (b1.volume() < b2.volume())
        cout << "ğŸ“¦ ç¬¬ 2 å€‹ç›’å­æ¯”è¼ƒå¤§ï¼" << endl;
    else
        cout << "ğŸ“¦ å…©å€‹ç›’å­ä¸€æ¨£å¤§ï¼" << endl;
}

int main() {
    Box boxA(3, 4, 5);   // é«”ç© 60
    Box boxB(2, 6, 5);   // é«”ç© 60
    compare(boxA, boxB); // å‚³å€¼å‘¼å«
    return 0;
}
```

{% endraw %}

### ç‰©ä»¶å‚³å€å‘¼å«ï¼ˆä½¿ç”¨æŒ‡æ¨™ï¼‰

å‚³éçš„æ˜¯ç‰©ä»¶çš„ã€Œè¨˜æ†¶é«”ä½å€ã€ => å‡½æ•¸å…§å¯ä»¥ä¿®æ”¹åŸç‰©ä»¶çš„å€¼

å‡½æ•¸å…§å¯ä»¥é€é -> æ“ä½œåŸå§‹ç‰©ä»¶

### ç¯„ä¾‹ï¼šç‰©ä»¶å‚³å€å‘¼å«ï¼šä½¿ç”¨æŒ‡æ¨™å°‡ç¬¬äºŒå€‹ Box çš„å°ºå¯¸è¤‡è£½åˆ°ç¬¬ä¸€å€‹ Box

{% raw %}

```cpp
#include <iostream>
using namespace std;

class Box {
private:
    double length, width, height;

public:
    Box(double l = 1, double w = 1, double h = 1) {
        length = l;
        width = w;
        height = h;
    }

    void set(double l, double w, double h) {
        length = l;
        width = w;
        height = h;
    }

    void show() {
        cout << "å°ºå¯¸ï¼š" << length << " x " << width << " x " << height << endl;
    }
};

// å‚³å€å‘¼å«ï¼šå°‡ b2 çš„å°ºå¯¸è¤‡è£½çµ¦ b1
void update(Box* b1, Box* b2) {
    cout << "ğŸ› ï¸ æ­£åœ¨è¤‡è£½ boxB çš„å°ºå¯¸åˆ° boxA...\n";
    *b1 = *b2;  // æˆ–ä½¿ç”¨ b1->set(...) ä¹Ÿå¯ä»¥
}

int main() {
    Box boxA(2, 3, 4);
    Box boxB(5, 5, 5);

    cout << "ğŸ”¸ åŸå§‹è³‡æ–™ï¼š" << endl;
    boxA.show();
    boxB.show();

    update(&boxA, &boxB);  // å‚³å€å‘¼å«

    cout << "\nâœ… æ›´æ–°å¾Œ boxAï¼š" << endl;
    boxA.show();

    return 0;
}
```

{% endraw %}

### ç‰©ä»¶å‚³åƒè€ƒå‘¼å«ï¼ˆæ¨è–¦ï¼‰

å‚³éçš„æ˜¯ã€ŒåŸç‰©ä»¶çš„åˆ¥åï¼ˆaliasï¼‰ï¼Œä½¿ç”¨ & ä¿®é£¾åƒæ•¸ä¾†å¯¦ç¾

å„ªé»ï¼š

-   ä¸æœƒç”¢ç”Ÿç‰©ä»¶è¤‡è£½ï¼Œç¯€çœè¨˜æ†¶é«”èˆ‡æ™‚é–“
-   çœ‹èµ·ä¾†å°±åƒå‚³å€¼ï¼Œä½†å…¶å¯¦èƒ½æ”¹åˆ°åŸæœ¬çš„å…§å®¹
-   å¯ä»¥ç›´æ¥ç”¨`.`ï¼Œæ¯”æŒ‡æ¨™ç›´è¦º

### ç¯„ä¾‹ï¼šç‰©ä»¶å‚³åƒè€ƒå‘¼å«ï¼šæŠŠ boxB çš„å°ºå¯¸è¨­å®šåˆ° boxA

{% raw %}

```cpp
#include <iostream>
using namespace std;

class Box {
private:
    double length, width, height;

public:
    // å»ºæ§‹å­
    Box(double l = 1, double w = 1, double h = 1) {
        length = l;
        width = w;
        height = h;
    }

    void set(double l, double w, double h) {
        length = l;
        width = w;
        height = h;
    }

    void show() {
        cout << "å°ºå¯¸ï¼š" << length << " x " << width << " x " << height << endl;
    }
};

// å‚³åƒè€ƒå‘¼å«å‡½å¼
void update(Box& b1, Box& b2) {
    cout << "ğŸ”§ å°‡ boxB çš„å°ºå¯¸è¨­å®šçµ¦ boxA...\n";
    b1 = b2;  // æˆ–ä½¿ç”¨ b1.set(...) ä¹Ÿå¯ä»¥
}

int main() {
    Box boxA(3, 3, 3);
    Box boxB(5, 5, 5);

    cout << "ğŸš© æ›´æ–°å‰ï¼š" << endl;
    boxA.show();
    boxB.show();

    update(boxA, boxB);  // å‚³åƒè€ƒå‘¼å«

    cout << "\nâœ… æ›´æ–°å¾Œ boxAï¼š" << endl;
    boxA.show();
    return 0;
}
```

{% endraw %}

## protected(ç¹¼æ‰¿çš„éƒ¨åˆ†å†èªª)

protected æ˜¯ä»‹æ–¼ private å’Œ public ä¹‹é–“çš„å­˜å–æ§åˆ¶ä¿®é£¾è©

| æ¬Šé™ä¿®é£¾è©  | è‡ªå·±é¡åˆ¥å…§å¯å­˜å– | å­é¡åˆ¥å¯å­˜å– | å¤–éƒ¨å¯å­˜å– |
| ----------- | ---------------- | ------------ | ---------- |
| `private`   | âœ…               | âŒ           | âŒ         |
| `protected` | âœ…               | âœ…           | âŒ         |
| `public`    | âœ…               | âœ…           | âœ…         |
